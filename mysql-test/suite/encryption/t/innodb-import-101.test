--source include/have_innodb.inc

--disable_warnings
set global innodb_file_format = 'Barracuda';
--enable_warnings

create table t0_be (c1 int not null auto_increment primary key, b char(200)) engine=innodb;
create table t1_be (c1 int not null auto_increment primary key, b char(200)) engine=innodb encrypted=yes;
create table t2_be (c1 int not null auto_increment primary key, b char(200)) engine=innodb page_compressed=yes;
create table t3_be (c1 int not null auto_increment primary key, b char(200)) engine=innodb page_compressed=yes encrypted=yes;
create table t4_be (c1 int not null auto_increment primary key, b char(200)) engine=innodb row_format=compressed;
create table t5_be (c1 int not null auto_increment primary key, b char(200)) engine=innodb row_format=compressed encrypted=yes;

create table t0_le (c1 int not null auto_increment primary key, b char(200)) engine=innodb;
create table t1_le (c1 int not null auto_increment primary key, b char(200)) engine=innodb encrypted=yes;
create table t2_le (c1 int not null auto_increment primary key, b char(200)) engine=innodb page_compressed=yes;
create table t3_le (c1 int not null auto_increment primary key, b char(200)) engine=innodb page_compressed=yes encrypted=yes;
create table t4_le (c1 int not null auto_increment primary key, b char(200)) engine=innodb row_format=compressed;
create table t5_le (c1 int not null auto_increment primary key, b char(200)) engine=innodb row_format=compressed encrypted=yes;

alter table t0_be discard tablespace;
alter table t1_be discard tablespace;
alter table t2_be discard tablespace;
alter table t3_be discard tablespace;
alter table t4_be discard tablespace;
alter table t5_be discard tablespace;

alter table t0_le discard tablespace;
alter table t1_le discard tablespace;
alter table t2_le discard tablespace;
alter table t3_le discard tablespace;
alter table t4_le discard tablespace;
alter table t5_le discard tablespace;

-- let DATADIR = `SELECT @@datadir`

-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t0_be.ibd $DATADIR/test/t0_be.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t1_be.ibd $DATADIR/test/t1_be.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t2_be.ibd $DATADIR/test/t2_be.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t3_be.ibd $DATADIR/test/t3_be.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t4_be.ibd $DATADIR/test/t4_be.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t5_be.ibd $DATADIR/test/t5_be.ibd

-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t0_le.ibd $DATADIR/test/t0_le.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t1_le.ibd $DATADIR/test/t1_le.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t2_le.ibd $DATADIR/test/t2_le.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t3_le.ibd $DATADIR/test/t3_le.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t4_le.ibd $DATADIR/test/t4_le.ibd
-- copy_file $MYSQL_TEST_DIR/suite/encryption/import/101/t5_le.ibd $DATADIR/test/t5_le.ibd

--disable_warnings
alter table t0_be import tablespace;
alter table t1_be import tablespace;
alter table t2_be import tablespace;
alter table t3_be import tablespace;
alter table t4_be import tablespace;
alter table t5_be import tablespace;

alter table t0_le import tablespace;
alter table t1_le import tablespace;
alter table t2_le import tablespace;
alter table t3_le import tablespace;
alter table t4_le import tablespace;
alter table t5_le import tablespace;
--enable_warnings

select * from t0_be;
select * from t1_be;
select * from t2_be;
select * from t3_be;
select * from t4_be;
select * from t5_be;

select * from t0_le;
select * from t1_le;
select * from t2_le;
select * from t3_le;
select * from t4_le;
select * from t5_le;

drop table t0_be, t1_be, t2_be, t3_be, t4_be, t5_be;
drop table t0_le, t1_le, t2_le, t3_le, t4_le, t5_le;

--disable_warnings
set global innodb_file_format=default;
--enable_warnings
